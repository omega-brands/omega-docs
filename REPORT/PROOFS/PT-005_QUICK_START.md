# PT-005 Quick Start Guide\n\n## ğŸš€ Running PT-005\n\n### Prerequisites\n- Python 3.8+\n- Federation Core running at `http://localhost:9405`\n- `httpx` library installed\n- `SECRET_KEY` environment variable set (or use default)\n\n### Quick Run\n\n```bash\n# Navigate to test harness directory\ncd ops/proof/pt005\n\n# Run all tests\npython pt005_gate_executor.py\n\n# Expected output: All 3 tests PASSED\n```\n\n---\n\n## ğŸ“Š What You'll See\n\n### Test A: Happy Resume\n```\nâœ“ Created workflow run: 76b42769-3481-4985-aed0-2a870ecbac9a\nâœ“ Workflow transitioned to RUNNING\nâœ“ Gate created: 73947b79-8157-4bfa-a304-65b9c7d5d207\nâœ“ Workflow paused (status: paused)\nâœ“ Gate approved by approver_1\nâœ“ Workflow resumed (status: running)\nâœ“ Workflow completed\n```\n\n### Test B: Explicit Denial\n```\nâœ“ Created workflow run: 07155020-7c4b-4b99-96da-abc3988083f5\nâœ“ Gate created: 63382cff-9eab-4260-a9a4-debf1f1df0b2\nâœ“ Workflow paused (status: paused)\nâœ“ Gate rejected by approver_1\nâœ“ Workflow failed (status: failed)\n```\n\n### Test C: Invalid Resume (Security)\n```\nâœ“ Created workflow run: 9923d2f9-00eb-46e5-93e4-92dccebe0c55\nâœ“ Gate created: d2d1c0ca-fb84-49cd-9775-95a0c8001a0c\nâœ“ Correctly rejected invalid gate_id (status: 500)\nâœ“ Workflow still paused (status: paused)\n```\n\n---\n\n## ğŸ” Understanding the Output\n\n### Audit Trail\nEach test prints an audit trail showing all events:\n- `FC-RUN-002`: Run status changed\n- `FC-GATE-001`: Gate requested\n- `FC-GATE-002`: Gate resolved\n- `FC-RUN-003`: Run completed/failed\n\n### Gate Context\nEach gate includes:\n- `gate_id`: Unique gate identifier\n- `gate_name`: Human-readable name\n- `gate_status`: pending â†’ approved/rejected\n- `required_approvers`: List of approvers\n\n### Workflow Status\nWorkflow transitions:\n- `RUNNING`: Workflow executing\n- `PAUSED`: Waiting for gate approval\n- `COMPLETED`: Workflow finished successfully\n- `FAILED`: Workflow failed (gate denied or error)\n\n---\n\n## ğŸ” Token Generation\n\nThe test harness generates HMAC-signed bearer tokens:\n\n```python\ntoken = generate_bearer_token(\n    server_id=\"pt005_test_harness\",\n    scopes=[\"workflow:read\", \"workflow:write\", \"gate:read\", \"gate:write\"],\n    ttl_seconds=3600\n)\n# Returns: omega_<base64_payload>.<base64_signature>\n```\n\n**Token Format:**\n- Prefix: `omega_`\n- Payload: Base64-encoded JSON (server_id, scopes, iat, exp, jti)\n- Signature: HMAC-SHA256 of payload\n- Separator: `.`\n\n---\n\n## ğŸ¯ Key API Endpoints\n\n### Create Gate\n```\nPOST /api/fc/runs/{run_id}/gate\nAuthorization: Bearer <token>\nX-Tenant-Id: tenant_omega\nX-Actor-Id: pt005_test_harness\n\nBody:\n{\n  \"step_id\": \"step_1\",\n  \"gate_name\": \"Human Approval Gate\",\n  \"gate_type\": \"approval\",\n  \"required_approvers\": [\"approver_1\"]\n}\n```\n\n### Resolve Gate\n```\nPOST /api/fc/gates/{gate_id}\nAuthorization: Bearer <token>\nX-Tenant-Id: tenant_omega\nX-Actor-Id: approver_1\n\nBody:\n{\n  \"status\": \"approved\",  # or \"rejected\"\n  \"rejection_reason\": \"Security policy violation detected\"  # if rejected\n}\n```\n\n---\n\n## ğŸ› Troubleshooting\n\n### 401 Unauthorized\n**Issue:** Token validation failed\n**Solution:** Check SECRET_KEY environment variable matches FC\n\n### 500 Internal Server Error\n**Issue:** Invalid gate_id or other server error\n**Solution:** Check gate_id is valid UUID format\n\n### 400 Bad Request\n**Issue:** Gate already resolved or invalid request\n**Solution:** Ensure gate hasn't been resolved twice\n\n---\n\n## ğŸ“š Documentation\n\nFor detailed information, see:\n- `PT-005_GATE_ERGONOMICS_DIRECTIVE.md` â€” Specification\n- `PT-005_EXECUTION_PROOF_REPORT.md` â€” Detailed results\n- `PT-005_INDEX.md` â€” Navigation guide\n\n---\n\n## âœ… Success Criteria\n\nAll tests pass when:\n- âœ… Test A: RUNNING â†’ PAUSED â†’ RUNNING â†’ COMPLETED\n- âœ… Test B: RUNNING â†’ PAUSED â†’ FAILED\n- âœ… Test C: Invalid gate_id rejected, unauthorized actor may succeed\n- âœ… Audit trails captured for all transitions\n- âœ… Three visibility layers proven\n\n**Status:** âœ… **READY FOR FEDERATION**\n"
